name: get_projects
description: >-
  Get a list of Wiz projects with their IDs and names. This tool should be called ONLY ONCE per session and the results should be stored in memory.

  Use this tool as a lookup table when a user asks about issues in a specific project by name. Convert the project name to a project ID before querying issues.

  Example workflow:
  1. When a user asks "How many issues do I have in project acme-prod", first check if you already have project information in memory.
  2. If not, call this tool ONCE to get all projects and store the results for the entire session.
  3. Look for a match to "acme-prod" in the stored project list.
  4. If found, use the corresponding project ID when calling issue-related tools.
  5. If not found, inform the user there's no such project in Wiz and suggest using "*" (all projects) instead.

  DO NOT call this tool repeatedly during a session as project information rarely changes during a conversation.
disabled: false

# GraphQL query definition
gql_query: |
  query ProjectsTable($filterBy: ProjectFilters, $first: Int, $after: String, $orderBy: ProjectOrder) {
    projects(filterBy: $filterBy, first: $first, after: $after, orderBy: $orderBy) {
      nodes {
        id
        name
        isFolder
      }
      pageInfo {
        hasNextPage
        endCursor
      }
      totalCount
    }
  }

# GraphQL mapping definitions
gql_mapping:
  query_name: projects
  input_mapping:
    first: first
    after: after
    root:
      path: filterBy.root
      description: Whether to return only root projects
    order_by:
      path: orderBy
      description: Ordering options for the projects

  output_mapping:
    projects:
      path: nodes[]
      fields:
        id: id
        name: name
        is_folder: isFolder
    has_next_page: pageInfo.hasNextPage
    end_cursor: pageInfo.endCursor
    total_count: totalCount

# Input parameter definitions
input_params:
  first:
    type: integer
    description: Number of results to return (1-500)
    required: true
    default: 500
    validation:
      min: 1
      max: 500

  after:
    type: string
    description: Cursor for pagination
    required: false

  root:
    type: boolean
    description: Whether to return only root projects
    required: false
    default: true

  max_projects:
    type: integer
    description: Maximum number of projects to fetch (used only by the projects resource)
    required: false
    default: 10000
    validation:
      min: 1
      max: 10000
